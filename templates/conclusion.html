{% extends 'base.html' %}
{% load static %}

{% block title %}–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ{% endblock %}

{% block content %}
<section class="page">
  <div class="card stack-lg">
    <h2>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</h2>
    
    {# –ö–Ω–æ–ø–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ - —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä—é–∑–µ—Ä–∞ #}
    {% if user.is_authenticated and user.is_superuser %}
    <div class="admin-controls">
      <a class="btn" href="{% url 'upload_videos' %}">
        üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ
      </a>
    </div>
    {% endif %}
    
    <p class="lead">–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ –≤–∏–¥–µ–æ.</p>

    <div class="conclusion-scrollable">
      <ul class="conclusion-list">
        {% for video in videos %}
        <li>
          <div class="video-list-item">
            {# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ #}
            {% if user.is_authenticated and user.is_superuser %}
              <button class="video-title-btn editable" 
                      onclick="showVideoModal({{ video.pk }}, '{{ video.title|default:"–í–∏–¥–µ–æ –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è"|escapejs }}', '{{ video.description|default:""|escapejs }}')">
                {{ video.title|default:"–í–∏–¥–µ–æ –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è" }}
                <span class="edit-hint"> - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</span>
              </button>
            {% else %}
              <a href="{% url 'video_detail' video.pk %}" class="video-title-link">
                {{ video.title|default:"–í–∏–¥–µ–æ –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è" }}
              </a>
            {% endif %}
          </div>
        </li>
        {% empty %}
        <li>
          <p class="muted">–ü–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç.</p>
          {# –°—Å—ã–ª–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ - —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä—é–∑–µ—Ä–∞ #}
          {% if user.is_authenticated and user.is_superuser %}
          <a href="{% url 'upload_videos' %}">–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–µ—Ä–≤–æ–µ –≤–∏–¥–µ–æ</a>
          {% endif %}
        </li>
        {% endfor %}
      </ul>
    </div>

    <div class="btn-row">
      <a class="btn" href="{% url 'gallery' %}">–ù–∞—á–∞–ª–æ –≥–∞–ª–µ—Ä–µ–∏</a>
      <a class="btn secondary" href="/">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
      
      {# –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ #}
      {% if user.is_authenticated %}
      <a class="btn" href="{% url 'logout' %}">
        <svg fill="currentColor" height="20" viewbox="0 0 24 24" width="20"><path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/></svg>
        –í—ã–π—Ç–∏
      </a>
      {% else %}
      {# –ö–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ #}
      <a class="btn" href="{% url 'login' %}">
        <svg fill="currentColor" height="20" viewbox="0 0 24 24" width="20"><path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/></svg>
        –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
      </a>
      {% endif %}
    </div>
  </div>
</section>
{% endblock %}